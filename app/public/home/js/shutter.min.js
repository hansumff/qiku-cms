function tab(t,i,e,s,h,r,n){t[e]&&t[e][i]&&s&&(s.call(t[e][i]),clearTimeout(t[e][i].timer),t[e][i].timer=setTimeout(function(){tab(t,i,e+n,s,h,r,n),tab(t,i+r,e,s,h,r,n)},h))}function getXY(t,i,e){for(var s=[],h=0;h<i;h++){for(var r=[],n=0;n<e;n++)t[h*e+n].xIndex=n,t[h*e+n].yIndex=h,r.push(t[h*e+n]);s.push(r)}return s}(function(t,i,e,s){var h=function(i,e){this.defaults={isAutoPlay:!1,playInterval:3e3,curDisplay:0,fullPage:!1},this.opts=t.extend({},this.defaults,e),this.inital(i)};h.prototype={play:function(){var t=this;this.opts.isAutoPlay&&(clearInterval(this.playTime),this.playTime=setInterval(function(){t.$nextBtn.click()},this.opts.playInterval))},moveSwitch:function(t,i,e){switch(t){case 0:this.gridWhole(e,0);break;case 1:this.gridWhole(e,1);break;case 2:this.gridWhole(e,2);break;case 3:this.gridWhole(e,3);break;case 4:this.gridTop(e,0);break;case 5:this.gridTop(e,1);break;case 6:this.gridTop(e,2);break;case 7:this.gridLeft(e,0);break;case 8:this.gridLeft(e,1);break;case 9:this.gridLeft(e,2);break;case 10:this.gridOpacity(e);break;case 11:this.gridAccordion(e);break;case 12:this.gridLittle(e);break;case 13:this.gridSwitch(e);break;default:this.gridTop(e,0)}},toggleMove:function(t,i){if(!t){if(this.curDisplay===i)return;t=0===this.curDisplay&&i===this.shutterItem_len-1||i<this.curDisplay?"prev":"next"}i||("prev"===t?(i=this.curDisplay-1,0===this.curDisplay&&(i=this.shutterItem_len-1)):(i=this.curDisplay+1,this.curDisplay===this.shutterItem_len-1&&(i=0))),this.$shutterDesc.animate({bottom:-48});var e=function(t,i){return Math.floor(Math.random()*(i+1)-t)};this.moveSwitch(e(0,13),t,i),this.shutterTitle=this.$shutterItem.eq(i).attr("data-shutter-title")},initalShutter:function(){var e=this.$shutterItem.eq(this.curDisplay),s=this.$shutterItem.not(e);e.css("zIndex",20),s.each(function(i){t(this).css("zIndex",++i)}),this.$shutter.css({width:this.opts.shutterW,height:this.opts.shutterH}),this.opts.fullPage&&this.$shutter.css({width:t(i).width(),height:t(i).height(),margin:0,borderRadius:0,border:"none"})},inital:function(e){var s=this;this.$shutter=e,this.$shutterItem=this.$shutter.find(".shutter-img a"),this.$prevBtn=this.$shutter.find(".shutter-btn .prev"),this.$nextBtn=this.$shutter.find(".shutter-btn .next"),this.$shutterNav=this.$shutter.find(".shutter-nav li"),this.$shutterDesc=this.$shutter.find(".shutter-desc"),this.shutterItem_len=this.$shutterItem.length,this.curDisplay=this.opts.curDisplay>this.shutterItem_len-1?this.opts.curDisplay=this.shutterItem_len-1:this.opts.curDisplay,this.b_stop=!0,this.shutterTitle="",this.playTime=null,this.initalShutter(),this.shutterW=this.$shutter.width(),this.shutterH=this.$shutter.height(),this.$prevBtn.bind("click",function(){s.b_stop&&(s.b_stop=!1,s.toggleMove("prev"))}),this.$nextBtn.bind("click",function(){s.b_stop&&(s.b_stop=!1,s.toggleMove("next"),s.$shutterDesc.animate({bottom:-48}))}),this.opts.fullPage&&t(i).resize(function(){setTimeout(function(){s.$shutter.css({width:t(this).width(),height:t(this).height()}),s.shutterW=s.$shutter.width(),s.shutterH=s.$shutter.height()},30)}),this.play(),this.$shutter.hover(function(){clearInterval(s.playTime)},function(){s.play()})},recovery:function(t,i,e,s,h){var r=this;setTimeout(function(){t.css("zIndex",20),i.css("zIndex",r.curDisplay).html(s),r.curDisplay=e,r.$shutterDesc.animate({bottom:0}).find("p").text(r.shutterTitle),r.b_stop=!0},h)},gridWhole:function(i,e){var s=this.$shutterItem.eq(this.curDisplay),h=this.$shutterItem.eq(i),r=s.html(),n=t('<div class="created"></div>'),a=0;h.css("zIndex",19),s.find("img").fadeOut(),n.html(r).css({position:"absolute",zIndex:20,left:0,top:0,overflow:"hidden",width:this.shutterW,height:this.shutterH}),s.append(n),0===e?(a=this.shutterW,n.velocity({left:a},{duration:1e3})):1===e?(a=-this.shutterW,n.velocity({left:a},{duration:1e3})):2===e?(a=this.shutterH,n.velocity({top:a},{duration:1e3})):3===e&&(a=-this.shutterH,n.velocity({top:a},{duration:1e3})),n.find("img").css({display:"block",width:this.shutterW,height:this.shutterH}),this.recovery(h,s,i,r,1200)},gridTop:function(i,e){var s=this,h=this.$shutterItem.eq(this.curDisplay),r=this.$shutterItem.eq(i),n=h.html(),a=0;r.css("zIndex",19),h.find("img").fadeOut();for(var u=0;u<12;u++){var o=t('<div class="created"></div>');o.html(n).css({position:"absolute",zIndex:20,left:this.shutterW/12*u,top:0,overflow:"hidden",width:this.shutterW/12,height:this.shutterH}),h.append(o),o.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:this.shutterW/-12*u})}if(0===e){var c=0;h.find(".created").each(function(i){c=i%2==0?s.shutterH:-s.shutterH,t(this).velocity({top:c},{duration:1e3})})}else 1===e?h.find(".created").each(function(i){a=80*i,t(this).velocity({top:t(this).height()},{duration:120+a})}):2===e&&h.find(".created").each(function(i){a=80*i,t(this).velocity({top:-t(this).height()},{duration:120+a})});this.recovery(r,h,i,n,1e3)},gridLeft:function(i,e){var s=this,h=this.$shutterItem.eq(this.curDisplay),r=this.$shutterItem.eq(i),n=h.html(),a=0;r.css("zIndex",19),h.find("img").fadeOut();for(var u=0;u<12;u++){var o=t('<div class="created"></div>');o.html(n).css({position:"absolute",zIndex:20,left:0,top:this.shutterH/12*u,overflow:"hidden",width:this.shutterW,height:this.shutterH/12}),h.append(o),o.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginTop:this.shutterH/-12*u})}if(0===e){var c=0;h.find(".created").each(function(i){c=i%2==0?s.shutterW:-s.shutterW,t(this).velocity({left:c},{duration:1e3})})}else 1===e?h.find(".created").each(function(i){a=80*i,t(this).velocity({left:t(this).width()},{duration:120+a})}):2===e&&h.find(".created").each(function(i){a=80*i,t(this).velocity({left:-t(this).width()},{duration:120+a})});this.recovery(r,h,i,n,1e3)},gridOpacity:function(i){var e=this.$shutterItem.eq(this.curDisplay),s=this.$shutterItem.eq(i),h=e.html(),r=t('<div class="created"></div>');s.css("zIndex",19),e.find("img").fadeOut(),r.html(h).css({position:"absolute",zIndex:20,left:0,top:0,overflow:"hidden",width:this.shutterW,height:this.shutterH,opacity:1}),r.find("img").css({display:"block",width:this.shutterW,height:this.shutterH}),e.append(r),r.velocity({opacity:0},{duration:1e3}),this.recovery(s,e,i,h,1e3)},gridAccordion:function(i){var e=this.$shutterItem.eq(this.curDisplay),s=this.$shutterItem.eq(i),h=e.html(),r=0;s.css("zIndex",19),e.find("img").fadeOut();for(var n=0;n<12;n++){var a=t('<div class="created"></div>');a.html(h).css({position:"absolute",zIndex:20,left:this.shutterW/12*n,top:0,overflow:"hidden",width:this.shutterW/12,height:this.shutterH,opacity:1}),e.append(a),a.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:this.shutterW/-12*n})}e.find(".created").each(function(i){r=80*i,t(this).velocity({opacity:0},{duration:320+r})}),this.recovery(s,e,i,h,1200)},gridLittle:function(i){var e=this.$shutterItem.eq(this.curDisplay),s=this.$shutterItem.eq(i),h=e.html(),r=null;s.css("zIndex",19),e.find("img").fadeOut();for(var n=0;n<24;n++){var a=t('<div class="created"></div>');a.html(h).css({width:this.shutterW/6,height:this.shutterH/4,left:this.shutterW/6*(n%6),top:this.shutterH/4*Math.floor(n/6)}),e.append(a),a.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:-this.shutterW/6*(n%6),marginTop:-this.shutterH/4*Math.floor(n/6)})}r=getXY(e.find(".created"),4,6),tab(r,0,0,function(){var i=parseInt(this.style.left),e=parseInt(this.style.top);t(this).velocity({left:i+100,top:e+100,opacity:0})},100,1,1),this.recovery(s,e,i,h,1200)},gridSwitch:function(i){var e=this.$shutterItem.eq(this.curDisplay),s=this.$shutterItem.eq(i),h=e.html();s.css("zIndex",19),e.find("img").fadeOut();for(var r=0;r<20;r++){var n=t('<div class="created"></div>');n.html(h).css({width:this.shutterW/5,height:this.shutterH/4,left:this.shutterW/5*(r%5),top:this.shutterH/4*Math.floor(r/5)}),e.append(n),n.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:-this.shutterW/5*(r%5),marginTop:-this.shutterH/4*Math.floor(r/5)})}e.find(".created").each(function(i){i%2==0&&t(this).find("img").velocity({marginLeft:t(this).width()},{duration:500})}),setTimeout(function(){e.find(".created").each(function(i){i%1==0&&t(this).find("img").velocity({marginLeft:t(this).width()},{duration:500})})},600),this.recovery(s,e,i,h,1200)},constructor:h},t.fn.shutter=function(i){this.each(function(){new h(t(this),i)})}})(jQuery,window,document);